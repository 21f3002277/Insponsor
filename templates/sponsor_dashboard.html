<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home|SponsorDashboard </title>
    <!--css link-->
    <link rel="stylesheet" href="/static/style.css">
    <!--css  icons-->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <!--css bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!--js bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body style="background-color: rgb(228, 228, 228);">

    <!--Navbar-->   
    <nav class="navbars-r">
        <div class="logo">Insponsor</div>
        <ul class="navbars-r-links">
            <li class="active"><a href="/sponsor/{{uname}}"><strong></strong><span class="material-symbols-outlined">home</span></a></li>
            <li class="active"><a href="/sponsor/campaign/{{uname}}"><strong></strong><span class="material-symbols-outlined">campaign</span></a></li>
            <li><a href="/sponsor/{{uname}}/searchInfluencer"><strong></strong><span class="material-symbols-outlined">person_search</span></a></li>
            <li><a href="/sponsor/statistics/{{uname}}"><strong></strong><span class="material-symbols-outlined">query_stats</span></a></li>
            <li><a href="/sponsor/profile/{{uname}}"><strong></strong><span class="material-symbols-outlined">person</span></a></li>
            <li><a href="/logout"><strong></strong><span class="material-symbols-outlined">logout</span></a></li>

        </ul>
        </div>
    </nav>



    <nav class="navbars-r1">
        <h3>Good {{greeting}}, Hi {{uname}} !!</h3>
    </nav>


    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert-overlay">
        {% for msg in messages %}
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
        </div>
    {% endif %}
    {% endwith %}



    <main>
        <h1>Dashboard</h1>
        <div class="insights" style="margin-left: 290px;">
            <div class="earning">
                <span class="material-symbols-outlined">analytics</span>
                <div class="middle">
                    <div class="left" style="margin-left:20px; margin-top:7px;">
                        <h5>Spendings</h5>
                        <h6 style="font-size: 40px;">â‚¹{{spends}}</h6>
                    </div>
                    
                </div>
                <small class="text-muted">Last 24 Hours</small> 
            </div>
            <div class="activeCampaigns">
                <span class="material-symbols-outlined">campaign</span>
                <div class="middle">
                    <div class="left" style="margin-left:20px; margin-top:7px;">
                        <h5>Active Campaigns</h5>
                        {% if activeCampaign_no %}
                            <h6 style="font-size: 40px;">{{activeCampaign_no}}</h6>
                        {% else %}
                            <h6 style="font-size: 40px;">0</h6>
                        {% endif %}
                    </div>
                    
                </div>
            </div>
            <div class="completedCampaigns">
                <span class="material-symbols-outlined">campaign</span>
                <div class="middle">
                    <div class="left" style="margin-left:20px; margin-top:7px;">
                        <h5>Completed Campaigns</h5>
                        {% if completedCampaign_no %}
                            <h6 style="font-size: 40px;">{{completedCampaign_no}}</h6>
                        {% else %}
                            <h6 style="font-size: 40px;">0</h6>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main> <br>



    <hr>






    <div class="container text-center">
        <div class="row g-2">
          <div class="col-6">
            <div class="p-3 border bg-white" class="Sponsor-requests-container" >
                <h2><strong>Sponsor Ads Requests</strong></h2>
                        <table class="table table-hover">
                            <thead >
                                <tr>
                                    <th scope="col">Campaign_Id</th>
                                    <th scope="col">Company_Name</th>
                                    <th>View</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for ads, campaign, sponsor in adsRequests %}
                                    <tr>
                                        <td>{{ ads.campaign_id }}</td>
                                        <td>{{ sponsor.company }}</td>
                                        <td><button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#static-spon-view-Request-{{ ads.campaign_id }}">View</button></td>
                                    </tr>
                                    <div class="modal fade sponsor-adrequest" id="static-spon-view-Request-{{ ads.campaign_id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel-view-{{ ads.campaign_id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="staticBackdropLabel-view-{{ ads.campaign_id }}">Campaign Details</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <form action="/sponsor/{{ uname }}/campaign/{{ ads.campaign_id }}/adsrequest/edit" method="post">
                                                    <div class="modal-body" style="text-align: left;">
                                                        <div class="card-header" style="width: 800px;">
                                                            <h1>{{ campaign.campaign_name }}</h1>
                                                            <h2 class="text-muted" style="width: 324px;">{{ sponsor.company }}</h2>
                                                        </div> <br>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-floating">
                                                                    <input type="text" class="form-control" placeholder="{{ ads.campaign_id }}" name="C_id" value="{{ ads.campaign_id }}" readonly>
                                                                    <label for="floatingInput">Campaign ID</label>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="input-group mb-3">
                                                                    <label class="input-group-text" for="influencer-search-{{ ads.campaign_id }}">Preferred Influencer</label>
                                                                    <input list="influencers-{{ campaign.campaign_id }}" class="form-control" id="influencer-search-{{ campaign.campaign_id }}" name="P_Influ_new" placeholder="Type to search...">
                                                                    <datalist id="influencers-{{ campaign.campaign_id }}">
                                                                        {% for influ in filtered_influencers[campaign.campaign_id] %}
                                                                            <option value="{{ influ.influencer_id }}">{{ influ.username }}</option>
                                                                        {% endfor %}
                                                                    </datalist>
                                                                </div>
                                                                <input type="hidden" name="P_Influ" value="{{ads.influencer_id}}">
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <div class="row mb-3 g-3">
                                                            <div class="col-md-6">
                                                                <label for="start_date" class="form-label">Start Date</label>
                                                                <input type="date" class="form-control" value="{{campaign.start_date}}" id="start_date" name="start_date" required>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="end_date" class="form-label">End Date</label>
                                                                <input type="date" class="form-control" value="{{campaign.end_date}}" id="end_date" name="end_date" required>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col" style="margin-top: 40px;">
                                                                <div class="input-group mb-3">
                                                                    <label class="input-group-text" for="inputGroupSelect02-niche-{{ campaign.campaign_id }}">Niche</label>
                                                                    <select class="form-select" id="inputGroupSelect02-niche-{{ campaign.campaign_id }}" name="niche" disabled>
                                                                        {% for niche in niches %}
                                                                            <option value="{{ niche.niche_id }}" {% if niche.niche_id == campaign.niche %}selected{% endif %}>
                                                                                {{ niche.name }}
                                                                            </option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <label for="budget-input-{{ campaign.campaign_id }}" class="col-form-label">Budget:</label>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">â‚¹</span>
                                                                    <input type="text" class="form-control" id="budget-input-{{ campaign.campaign_id }}" name="budget" value="{{ campaign.budget }}">
                                                                    <span class="input-group-text">.00</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="description-box-{{ campaign.campaign_id }}" class="col-form-label">Description:</label>
                                                            <textarea class="form-control" id="description-box-{{ campaign.campaign_id }}" name="description">{{ campaign.description }}</textarea>
                                                        </div>
                                                    </div>
                                                <div class="modal-footer">
                                                    {% if ads.status =='Pending' %}
                                                        <div></div>
                                                        <button type="submit" class="btn btn-success" style="width:80px">Edit</button>
                                                    {% endif %}
                                                </form>
                                                <form action="/sponsor/{{ uname }}/campaign/{{ ads.campaign_id }}/adsrequest/delete" method="post">
                                                    <input type="hidden" name="I_id" value="{{ads.influencer_id}}">
                                                    <button type="submit" class="btn btn-danger" style="width:80px">delete</button>
                                                </form>
                                            </div>  
                                        </div>
                                    </div>
                                {% endfor %}
            
                                
                            </tbody>
                        </table>
            </div>
          </div>
          <div class="col-6">
            <div class="p-3 border bg-white" class="Influencer-requests-container" >
                <h2><strong>Influencer Ads Requests</strong></h2>
                        <table class="table table-hover">
                            <thead >
                                <tr>
                                    <th scope="col">Campaign_Id</th>
                                    <th scope="col">Influencer_Name</th>
                                    <th>View</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for ads, campaign, influencer in adsRequests_influencer %}
                                    <tr>
                                        <td>{{ ads.campaign_id }}</td>
                                        <td>{{ influencer.username }}</td>
                                        <td><button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#static-influ-view-Request-{{ ads.campaign_id }}">View</button></td>
                                    </tr>
                                    <div class="modal fade" id="static-influ-view-Request-{{ ads.campaign_id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel-view-{{ ads.campaign_id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-lg" style="background: aquamarine;">
                                                <div class="modal-content"  style="background: aquamarine;">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="staticBackdropLabel-view-{{ ads.campaign_id }}">Campaign Details</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body" style="text-align: left;">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-floating" >
                                                                    <input type="text" class="form-control" style="background: transparent;" name="campaign_Id" value="{{ campaign.campaign_id }}" readonly>
                                                                    <label for="floatingInput">Campaign ID</label>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-floating">
                                                                    <input type="text" class="form-control" style="background: transparent;" name="campaign_name" value="{{campaign.campaign_name}}" readonly>
                                                                    <label for="floatingInput">Campaign Name</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <div class="mb-3">
                                                            <label for="description-box" class="col-form-label">Description:</label>
                                                            <textarea class="form-control" id="description-box"  style="background: transparent;" readonly>{{campaign.description}}</textarea>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <label for="budget-input" class="col-form-label">Budget:</label>
                                                                <div class="input-group mb-3" style="width: 250px;">
                                                                    <span class="input-group-text" style="background: transparent;">â‚¹</span>
                                                                    <input type="text" class="form-control" style="background: transparent;" value="{{campaign.budget}}" aria-label="Amount (to the nearest dollar)" readonly>
                                                                    <span class="input-group-text" style="background: transparent;">0.00</span>
                                                                    
                                                                </div>
                                                            </div>
                                                            <div class="col" style="margin-top: 37px;">
                                                                <div class="input-group mb-3">
                                                                    <label class="input-group-text" style="background: transparent;" for="inputGroupSelect02-niche-{{ campaign.campaign_id }}">Niche</label>
                                                                    {% for niche in niches %}
                                                                        {% if niche.niche_id == campaign.niche %}
                                                                            <input type="text" class="form-control" name="campaign_name" style="background: transparent;" value="{{ niche.name }}" readonly>
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                            
                                                            <hr>
                                                            <p style="text-align: center; font-size:larger"><strong>Influencer Negotiation :</strong></p>
                                                            <div class="row">
                                                                <div class="col" style="margin-top: 23px;">
                                                                    <div class="form-floating">
                                                                        <input type="text" class="form-control" style="background: transparent;" name="Influencer_name" value="{{influencer.username}}" readonly>
                                                                        <label for="floatingInput">Influencer Name</label>
                                                                    </div>
                                                                </div>
                                                                <div class="col">
                                                                    <label for="budget-input" class="col-form-label">Influencer Budget:</label>
                                                                    <div class="input-group mb-3" style="width: 250px;">
                                                                        <span class="input-group-text" style="background: transparent;">â‚¹</span>
                                                                        <input type="text" class="form-control" style="background: transparent;" name="Influencer_budget" value="{{ads.budget}}" aria-label="Amount (to the nearest dollar)">
                                                                        <span class="input-group-text" style="background: transparent;">0.00</span>
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
            
                                                            <div class="mb-3">
                                                                <label for="description-box" class="col-form-label">Terms Description:</label>
                                                                <textarea class="form-control" id="description-box"  style="background: transparent;" name="Terms_descri" placeholder="{{ads.description}}"></textarea>
                                                            </div>
                                                        </div>  

                                                    </div>
                                                    <div class="modal-footer">
                                                        <form action="/sponsor/{{uname}}/campaign/{{campaign.campaign_id}}/adsrequest/accept" method="post">
                                                            <input type="hidden" name="I_id" value="{{ ads.influencer_id }}">
                                                            <input type="hidden" name="N_budget" value="{{ ads.budget }}">
                                                            <input type="hidden" name="N_descri" value="{{ ads.description }}">
                                                            <input type="hidden" name="accept" value="Sponsor">
                                                            <button type="submit" class="btn btn-success">Accept</button>
                                                        </form>
                                                        
                                                        <form action="/sponsor/{{uname}}/campaign/{{campaign.campaign_id}}/adsrequest/reject" method="post">
                                                            <input type="hidden" name="I_id" value="{{ ads.influencer_id }}">
                                                            <button type="submit" class="btn btn-danger">Reject</button>
                                                        </form>
                                                        
                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            
                                        </div>
                                    </div>
                                {% endfor %}
            
                                
                            </tbody>
                        </table>
            </div>
          </div>

          <div class="col-6">
            <div class="p-3 border bg-white" class="completed-campaigns">
                <h2><strong>Completed Campaigns</strong></h2>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Campaign_Id</th>
                                <th scope="col">Rating</th>
                                <th scope="col">earning</th>
                                <th>View</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for campaigns, influencers, sponsors in completed_campaigns %}
                                <tr>
                                    <td>{{ campaigns.campaign_id }}</td>
                                    {% if campaigns.ratings %}
                                        {% for rate in campaigns.ratings  %}
                                            {% if rate.campaign_id == campaigns.campaign_id  %}
                                                <td>{{ rate.rating }}/5</td>
                                            {% endif %}
                                        {% endfor %}
                                    {% else %}
                                        <td>0/5</td>
                                    {% endif %}

                                    {% if campaigns.invoices %}
                                        {% for invoice in campaigns.invoices %}
                                            {% if invoice.status == 'Paid' %}
                                                <td style="font-size: 18px;"><span class="material-symbols-outlined" style="font-size: 16px;">
                                                    currency_rupee
                                                    </span>{{ invoice.payment_amount }}
                                                </td>
                                            {% else %}
                                            <td style="font-size: 18px;"><span class="material-symbols-outlined" style="font-size: 16px;">
                                                currency_rupee
                                                </span>0.0
                                            </td>
                                            {% endif %}
                                        {% endfor %}
                                    {% else %}
                                    <td style="font-size: 18px;"><span class="material-symbols-outlined" style="font-size: 16px;">
                                        currency_rupee
                                        </span>0.0
                                    </td>
                                    {% endif %}
                                    

                                    <td><button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#static-view2-Request-{{ campaigns.campaign_id }}">View</button></td>
                                </tr>
                                <div class="modal fade" id="static-view2-Request-{{ campaigns.campaign_id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel-view2-{{ campaigns.campaign_id }}" aria-hidden="true">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content" style="background: aquamarine;">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="staticBackdropLabel-view2-{{ campaigns.campaign_id }}">Campaign Details</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="card-header" style="width: 800px;">
                                                    <h1>{{ campaigns.campaign_name }}</h1>
                                                    <h2 class="text-muted" style="width: 324px;">{{ sponsors.company }}</h2>
                                                </div>
                                                <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                                <div class="card-body">
                                                    
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Campaign Id:</strong> {{ campaigns.campaign_id }}</p>
                                                        </div>
                                                        <div class="col">
                                                            <p><strong>Sponsor:</strong> {{ sponsors.username }}</p>
                                                        </div>
                                                    </div>
                                        
                                                   
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Visibility:</strong> {{ campaigns.visibility }}</p>
                                                        </div>
                                                        <div class="col">
                                                            <p><strong>Status:</strong> 
                                                                <span class="badge bg-info text-white">{{ campaigns.status }}</span>
                                                            </p>
                                                        </div>
                                                    </div>
                                        
                                              
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Budget:</strong></p>
                                                            <div class="input-group mb-3" style="max-width: 250px;">
                                                                <span class="input-group-text" >â‚¹</span>
                                                                <input type="text" class="form-control" id="budget-input-{{ campaigns.campaign_id }}" name="budget" value="{{ campaigns.budget }}" readonly>
                                                                <span class="input-group-text" >.00</span>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            {% for rate in campaigns.ratings %}

                                                                {% if rate.campaign_id == campaigns.campaign_id %}
                                                                    <p><strong>Rating:</strong></p>

                                                                    <div class="rating">
                                                                        {% for i in range(1, 6) %}
                                                                            {% if i <= rate.rating %}
                                                                                <i class="fa fa-star" style="color: gold;"></i>
                                                                            {% else %}
                                                                                <i class="fa fa-star" style="color: lightgray;"></i>
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    </div>
                                                         
                                                            
                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        </div>
                                                        
                                                        {% for invoice in campaigns.invoices %}
                                                        <div class="col">
                                                            <p><strong>Payment Amount:</strong></p>
                                                            <div class="input-group mb-3" style="max-width: 250px;">
                                                                <span class="input-group-text" >â‚¹</span>
                                                                <input type="text" class="form-control" id="payment-amount-input-{{ campaigns.campaign_id }}" name="payment_amt" value="{{ invoice.payment_amount }}" readonly>
                                                                <span class="input-group-text">.00</span>
                                                            </div>
                                                        </div>
                                                        
                                                        {% endfor %}
                                                    </div>
                                                    
                                        
                                                    <div class="mb-3">
                                                        <label for="description-box-{{ campaigns.campaign_id }}" class="col-form-label">
                                                            <strong>Description:</strong>
                                                        </label>
                                                        <textarea class="form-control" id="description-box-{{ campaigns.campaign_id }}" name="description" readonly style="min-height: 150px;">{{ campaigns.description }}</textarea>
                                                    </div>
                                                </div>
                                                <div class="accordion mt-4" id="campaignDetailsAccordion">
                                                    <!--
                                                    <div class="card">
                                                        <div class="card-header" id="headingAdsRequests">
                                                            <h2 class="mb-0">
                                                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseAdsRequests" aria-expanded="true" aria-controls="collapseAdsRequests">
                                                                    Ads Requests
                                                                </button>
                                                            </h2>
                                                        </div>
                                                        <div id="collapseAdsRequests" class="collapse show" aria-labelledby="headingAdsRequests" data-parent="#campaignDetailsAccordion">
                                                            <div class="card-body">
                                                                <ul class="list-group">
                                                                    {% for request in campaigns.ads_requests %}
                                                                    <li class="list-group-item">{{ request.id }}</li>
                                                                    {% endfor %}
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    -->
                                                    <div class="card" style="background: aquamarine;">
                                                        <div class="card-header" id="headingInvoices-{{ campaigns.campaign_id }}">
                                                            <h2 class="mb-0">
                                                                <button class="btn btn-link collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInvoices-{{ campaigns.campaign_id }}" aria-expanded="false" aria-controls="collapseInvoices-{{ campaigns.campaign_id }}">
                                                                    Invoices
                                                                </button>
                                                            </h2>
                                                        </div>
                                                        <div id="collapseInvoices-{{ campaigns.campaign_id }}" class="collapse" aria-labelledby="headingInvoices-{{ campaigns.campaign_id }}" data-bs-parent="#campaignDetailsAccordion">
                                                            <div class="card-body">
                                                                <ul class="list-group">
                                                                    {% for invoice in campaigns.invoices %}
                                                                        <li class="list-group-item">
                                                                            <a href="{{ url_for('view_invoice', invoice_id=invoice.id) }}">Invoice #{{ invoice.id }}</a>
                                                                        </li>
                                                                    {% endfor %}
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% if not campaigns.ratings %}
                                                        <div class="card" style="background: aquamarine;">
                                                            <div class="card-header" id="headingRatings-{{ campaigns.campaign_id }}">
                                                                <h2 class="mb-0">
                                                                    <button class="btn btn-link collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRatings-{{ campaigns.campaign_id }}" aria-expanded="false" aria-controls="collapseRatings-{{ campaigns.campaign_id }}">
                                                                        Ratings
                                                                    </button>
                                                                </h2>
                                                            </div>
                                                            <div id="collapseRatings-{{ campaigns.campaign_id }}" class="accordion-collapse collapse" aria-labelledby="headingRatings-{{ campaigns.campaign_id }}" data-bs-parent="#campaignDetailsAccordion-{{ campaigns.campaign_id }}">
                                                                <div class="card-body">
                                                                    <form method="post" action="/rating">
                                                                        <div class="mb-3">
                                                                            <label for="rating-{{ campaigns.campaign_id }}" class="form-label">Give a Rating:</label>
                                                                            <div class="rating" id="rating-{{ campaigns.campaign_id }}">
                                                                                <input type="radio" name="rating" value="5" id="star5-{{ campaigns.campaign_id }}"><label for="star5-{{ campaigns.campaign_id }}">â˜…</label>
                                                                                <input type="radio" name="rating" value="4" id="star4-{{ campaigns.campaign_id }}"><label for="star4-{{ campaigns.campaign_id }}">â˜…</label>
                                                                                <input type="radio" name="rating" value="3" id="star3-{{ campaigns.campaign_id }}"><label for="star3-{{ campaigns.campaign_id }}">â˜…</label>
                                                                                <input type="radio" name="rating" value="2" id="star2-{{ campaigns.campaign_id }}"><label for="star2-{{ campaigns.campaign_id }}">â˜…</label>
                                                                                <input type="radio" name="rating" value="1" id="star1-{{ campaigns.campaign_id }}"><label for="star1-{{ campaigns.campaign_id }}">â˜…</label>
                                                                            </div>
                                                                        </div>
                                                                        <input type="hidden" name="S_id" value="{{sponsors.sponsor_id}}">
                                                                        <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                                                        <input type="hidden" name="I_id" value="{{ campaigns.influencer_id }}">
                                                                        <button type="submit" class="btn btn-primary">Submit Rating</button>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}



                                                    
                                                        <form method="post" action="/review">
                                                            <div class="card" style="background: aquamarine;">
                                                                <div class="card-header" id="headingReviews-{{ campaigns.campaign_id }}">
                                                                    <h2 class="mb-0">
                                                                        <button class="btn btn-link collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseReviews-{{ campaigns.campaign_id }}" aria-expanded="false" aria-controls="collapseReviews-{{ campaigns.campaign_id }}">
                                                                            Review
                                                                        </button>
                                                                    </h2>
                                                                </div>
                                                                <div id="collapseReviews-{{ campaigns.campaign_id }}" class="accordion-collapse collapse" aria-labelledby="headingReviews-{{ campaigns.campaign_id }}" data-bs-parent="#campaignDetailsAccordion-{{ campaigns.campaign_id }}">
                                                                    <div class="card-body">
                                                                        <div class="mb-3">
                                                                            {% if not campaigns.reviews %}
                                                                                <textarea class="form-control" id="description-box-{{ campaigns.campaign_id }}" name="review" style="background: transparent;"></textarea>
                                                                                <button type="submit" class="btn btn-primary">Submit Review</button>
                                                                            {% else %}
                                                                                {% for review in campaigns.reviews %}
                                                                                    {% if review.campaign_id == campaigns.campaign_id %}
                                                                                        <textarea class="form-control" id="description-box-{{ review.review_id }}" name="review" readonly style="background: transparent;">{{ review.review }}</textarea>
                                                                                    {% endif %}
                                                                                {% else %}
                                                                                    <textarea class="form-control" id="description-box-{{ campaigns.campaign_id }}" name="review" style="background: transparent;"></textarea>
                                                                                    <button type="submit" class="btn btn-primary">Submit Review</button>
                                                                                {% endfor %}
                                                                            {% endif %}
                                                                            <input type="hidden" name="S_id" value="{{ sponsors.sponsor_id }}">
                                                                            <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                                                            <input type="hidden" name="I_id" value="{{ influencers.influencer_id }}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    
                                                    
                                                    
                                                                                               
                                                    
                                                    <!------    
                                                    <div class="card" style="background: aquamarine;">
                                                        <div class="card-header" id="headingInvoices">
                                                            <h2 class="mb-0">
                                                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseInvoices" aria-expanded="false" aria-controls="collapseInvoices">
                                                                    Invoices
                                                                </button>
                                                            </h2>
                                                        </div>
                                                        <div id="collapseInvoices" class="collapse" aria-labelledby="headingInvoices" data-parent="#campaignDetailsAccordion">
                                                            <div class="card-body">
                                                                <ul class="list-group">
                                                                    {% for invoice in campaigns.invoices %}
                                                                    <li class="list-group-item">{{ invoice.details }}</li>
                                                                    {% endfor %}
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                ------>
                                            </div>
                                            {% for invoice in campaigns.invoices %}
                                            {% if invoice and invoice.status=='Unpaid' %}
                                                <div class="modal-footer">
                                                    <a href="/sponsor/{{uname}}/invoice/{{invoice.id}}/payment/gateway" class="btn btn-primary" tabindex="-1" role="button"> Payment</a>
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            {% endif %}
                                            
                                            {% endfor %}
                                            
                                        </div>
                                    </div>
                                </div>
                                
                            {% endfor %}
                        </tbody>
                    </table>
                
            </div>
          </div>
          <div class="col-6">
            <div class="p-3 border bg-white" class="active-campaigns-container1">
                <h2><strong>Active Campaigns</strong></h2>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Campaign_Id</th>
                            <th scope="col">progress(in %)</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for campaigns, influencers, sponsors in active_campaigns %}
                            <tr>
                                <td>{{ campaigns.campaign_id }}</td>
                                <td>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                                    </div>
                                </td>
                                <td><button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#static-view1-Request-{{ campaigns.campaign_id }}">View</button></td>
                            </tr>
                            <form action="/influencer/campaign/{{uname}}/completed" method="post">
                                <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                <input type="hidden" name="I_id" value="{{ influencers.influencer_id }}">
                                <input type="hidden" name="S_id" value="{{ sponsors.sponsor_id }}">
                                <div class="modal fade" id="static-view1-Request-{{ campaigns.campaign_id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel-view1-{{ campaigns.campaign_id }}" aria-hidden="true">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content" style="background: aquamarine;">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="staticBackdropLabel-view1-{{ campaigns.campaign_id }}">Campaign Details</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="card-header" style="width: 800px;">
                                                    <h1>{{ campaigns.campaign_name }}</h1>
                                                    <h2 class="text-muted" style="width: 324px;">{{ sponsors.company }}</h2>
                                                </div>
                                                <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                                <div class="card-body">
                                                    
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Campaign Id:</strong> {{ campaigns.campaign_id }}</p>
                                                        </div>
                                                        <div class="col">
                                                            <p><strong>Sponsor:</strong> {{ sponsors.username }}</p>
                                                        </div>
                                                    </div>
                                        
                                                   
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Visibility:</strong> {{ campaigns.visibility }}</p>
                                                        </div>
                                                        <div class="col">
                                                            <p><strong>Status:</strong> 
                                                                <span class="badge bg-info text-white">{{ campaigns.status }}</span>
                                                            </p>
                                                        </div>
                                                    </div>
                                        
                                              
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <p><strong>Budget:</strong></p>
                                                            <div class="input-group mb-3" style="max-width: 250px;">
                                                                <span class="input-group-text" >â‚¹</span>
                                                                <input type="text" class="form-control" id="budget-input-{{ campaigns.campaign_id }}" name="budget" value="{{ campaigns.budget }}" readonly>
                                                                <span class="input-group-text" >.00</span>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            {% for rate in campaigns.ratings %}

                                                                {% if rate.campaign_id == campaigns.campaign_id %}
                                                                    <p><strong>Rating:</strong></p>

                                                                    <div class="rating">
                                                                        {% for i in range(1, 6) %}
                                                                            {% if i <= rate.rating %}
                                                                                <i class="fa fa-star" style="color: gold;"></i>
                                                                            {% else %}
                                                                                <i class="fa fa-star" style="color: lightgray;"></i>
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    </div>
                                                         
                                                            
                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        </div>
                                                        
                                                        <div class="col">
                                                            <p><strong>Payment Amount:</strong></p>
                                                            <div class="input-group mb-3" style="max-width: 250px;">
                                                                <span class="input-group-text" >â‚¹</span>
                                                                <input type="text" class="form-control" id="payment-amount-input-{{ campaigns.campaign_id }}" name="payment_amt" value="{{ campaigns.payment_amt }}" readonly>
                                                                <span class="input-group-text">.00</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                        
                                                    <div class="mb-3">
                                                        <label for="description-box-{{ campaigns.campaign_id }}" class="col-form-label">
                                                            <strong>Description:</strong>
                                                        </label>
                                                        <textarea class="form-control" id="description-box-{{ campaigns.campaign_id }}" name="description" readonly style="min-height: 150px;">{{ campaigns.description }}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <form action="/sponsor/{{ uname }}/campaign/{{ campaigns.campaign_id }}/adsrequest/delete" method="post">
                                                    <input type="hidden" name="I_id" value="{{influencers.influencer_id}}">
                                                    <button type="submit" class="btn btn-danger" style="width:80px">delete</button>
                                                </form>
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        {% endfor %}
                    </tbody>
                </table>
                
            </div>
          </div>
          <div class="col-6">
            <div class="p-3 border bg-white" class="flag-campaigns-container">
                <h2>Flag Campaigns</h2>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Campaign_Id</th>
                            <th scope="col">progress <br> (in %)</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for campaigns, influencers, sponsors in flagged_campaigns %}
                            <td>{{campaigns.campaign_id}}</td>
                            <td>
                                <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-danger" style="width: 75%"></div>
                                </div>
                            </td>
                            <td><button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#static-view1-Request-{{ campaigns.campaign_id }}">View</button></td>

                            <div class="modal fade" id="static-view1-Request-{{ campaigns.campaign_id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel-view1-{{ campaigns.campaign_id }}" aria-hidden="true">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content" style="background: aquamarine;">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="staticBackdropLabel-view1-{{ campaigns.campaign_id }}">Campaign Details</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="card-header" style="width: 800px;">
                                                <h1>{{ campaigns.campaign_name }}</h1>
                                                <h2 class="text-muted" style="width: 324px;">{{ sponsors.company }}</h2>
                                            </div>
                                            <input type="hidden" name="C_id" value="{{ campaigns.campaign_id }}">
                                            <div class="card-body">
                                                
                                                <div class="row mb-3">
                                                    <div class="col">
                                                        <p><strong>Campaign Id:</strong> {{ campaigns.campaign_id }}</p>
                                                    </div>
                                                    <div class="col">
                                                        <p><strong>Sponsor:</strong> {{ sponsors.username }}</p>
                                                    </div>
                                                </div>
                                    
                                               
                                                <div class="row mb-3">
                                                    <div class="col">
                                                        <p><strong>Visibility:</strong> {{ campaigns.visibility }}</p>
                                                    </div>
                                                    <div class="col">
                                                        <p><strong>Status:</strong> 
                                                            <span class="badge bg-info text-white">{{ campaigns.status }}</span>
                                                        </p>
                                                    </div>
                                                </div>
                                    
                                          
                                                <div class="row mb-3">
                                                    <div class="col">
                                                        <p><strong>Budget:</strong></p>
                                                        <div class="input-group mb-3" style="max-width: 250px;">
                                                            <span class="input-group-text" >â‚¹</span>
                                                            <input type="text" class="form-control" id="budget-input-{{ campaigns.campaign_id }}" name="budget" value="{{ campaigns.budget }}" readonly>
                                                            <span class="input-group-text" >.00</span>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        {% for rate in campaigns.ratings %}

                                                            {% if rate.campaign_id == campaigns.campaign_id %}
                                                                <p><strong>Rating:</strong></p>

                                                                <div class="rating">
                                                                    {% for i in range(1, 6) %}
                                                                        {% if i <= rate.rating %}
                                                                            <i class="fa fa-star" style="color: gold;"></i>
                                                                        {% else %}
                                                                            <i class="fa fa-star" style="color: lightgray;"></i>
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                </div>
                                                     
                                                        
                                                                
                                                            {% endif %}
                                                        {% endfor %}
                                                    </div>
                                                    
                                                    <div class="col">
                                                        <p><strong>Payment Amount:</strong></p>
                                                        <div class="input-group mb-3" style="max-width: 250px;">
                                                            <span class="input-group-text" >â‚¹</span>
                                                            <input type="text" class="form-control" id="payment-amount-input-{{ campaigns.campaign_id }}" name="payment_amt" value="{{ campaigns.payment_amt }}" readonly>
                                                            <span class="input-group-text">.00</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                    
                                                <div class="mb-3">
                                                    <label for="description-box-{{ campaigns.campaign_id }}" class="col-form-label">
                                                        <strong>Description:</strong>
                                                    </label>
                                                    <textarea class="form-control" id="description-box-{{ campaigns.campaign_id }}" name="description" readonly style="min-height: 150px;">{{ campaigns.description }}</textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
          </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='flash.js') }}"></script>
</body>
<!--this is my footer part-->
<footer>
    <div class="container-footer">
        <form action="">
            
        </form>
    </div>
    <div class="devop-rg">
        <h4 ><strong><em>21f3002277@ds.study.iitm.ac.in  |</em>  VIKASH PRASAD</strong>  <em>|</em> IITMADRAS.All rights are reversed ** </h4>
    </div>
</footer>
</html>